{
  "hrfVersion": "1.0.0",
  "messages": [
    {
      "role": "system",
      "channel": "analysis",
      "contentType": "text",
      "content": "You are an enterprise assistant. Follow HRF. Be concise, factual, and cite tool outputs when present."
    },
    {
      "role": "developer",
      "channel": "analysis",
      "contentType": "text",
      "content": "Execution is session-based. Transcript is durable. Tool calls must be recorded for replay/debug. If a tool is unavailable, do not guess."
    },
    {
      "role": "user",
      "channel": "analysis",
      "contentType": "text",
      "content": "Plan a 2-day NYC itinerary focused on architecture and coffee. Keep it walkable and include 4 stops per day."
    },
    {
      "role": "assistant",
      "channel": "commentary",
      "contentType": "harmony-script",
      "termination": "end",
      "content": {
        "vars": {
          "city": "NYC",
          "focus": "architecture and coffee",
          "days": 2
        },
        "steps": [
          {
            "type": "extract-input",
            "output": {
              "userQuery": "$input.text"
            }
          },
          {
            "type": "tool-call",
            "recipient": "places.search",
            "channel": "commentary",
            "args": {
              "query": "great coffee shops in Manhattan near iconic architecture",
              "limit": 8
            },
            "save_as": "places"
          },
          {
            "type": "tool-call",
            "recipient": "routes.cluster_walkable",
            "channel": "commentary",
            "args": {
              "city": "$vars.city",
              "places": "$vars.places",
              "days": "$vars.days",
              "stopsPerDay": 4
            },
            "save_as": "plan"
          },
          {
            "type": "assistant-message",
            "channel": "final",
            "content_template": "Hereâ€™s a walkable {{vars.days}}-day NYC itinerary focused on {{vars.focus}}:\n\nDay 1:\n- {{plan.day1[0]}}\n- {{plan.day1[1]}}\n- {{plan.day1[2]}}\n- {{plan.day1[3]}}\n\nDay 2:\n- {{plan.day2[0]}}\n- {{plan.day2[1]}}\n- {{plan.day2[2]}}\n- {{plan.day2[3]}}\n\nIf you want, I can optimize for weather, subway-only, or specific neighborhoods."
          }
        ]
      }
    }
  ]
}