{
  "hrfVersion": "1.0.0",
  "messages": [
    {
      "role": "system",
      "channel": "analysis",
      "contentType": "text",
      "content": "You are a Harmony-enabled assistant running under the Harmony Response Format (HRF). Follow the envelope strictly."
    },
    {
      "role": "developer",
      "channel": "analysis",
      "contentType": "text",
      "content": "Goal: demonstrate Harmony.Format MVP session execution: message-by-message processing, transcript building, tool dependency preflight, and blocked execution behavior."
    },
    {
      "role": "user",
      "channel": "analysis",
      "contentType": "text",
      "content": "Build me a short ‘project pulse’ summary: recent changes, what’s next, and any risks. Keep it crisp."
    },
    {
      "role": "assistant",
      "channel": "commentary",
      "recipient": "planner.create",
      "contentType": "harmony-script",
      "termination": "end",
      "content": {
        "vars": {
          "maxBullets": 5,
          "tone": "executive"
        },
        "steps": [
          {
            "type": "extract-input",
            "output": {
              "request": "$input.text"
            }
          },
          {
            "type": "assistant-message",
            "channel": "analysis",
            "content_template": "Planning a {{vars.tone}} pulse summary (max {{vars.maxBullets}} bullets). Checking required tools first..."
          },
          {
            "type": "tool-call",
            "recipient": "mcp.search",
            "channel": "commentary",
            "args": {
              "query": "$vars.request",
              "limit": 3
            },
            "save_as": "searchResults"
          },
          {
            "type": "tool-call",
            "recipient": "mcp.fetch",
            "channel": "commentary",
            "args": {
              "ids": "$vars.searchResults"
            },
            "save_as": "fetchedDocs"
          },
          {
            "type": "assistant-message",
            "channel": "analysis",
            "content_template": "Drafting summary from retrieved materials ({{vars.tone}} tone)."
          },
          {
            "type": "assistant-message",
            "channel": "final",
            "content_template": "."
          }
        ]
      }
    },
    {
      "role": "assistant",
      "channel": "final",
      "contentType": "text",
      "termination": "return",
      "content": "Blocked: this script requires tools that are not currently available (mcp.search, mcp.fetch). Once those tools are registered/available via the host (e.g., MCP server), re-run the same session step to proceed."
    }
  ]
}